import type { ClinicalCase } from '../types';

export const cases: ClinicalCase[] = [
  {
    id: 'hyponatremia-case',
    moduleId: 'electrolytes',
    title: 'Post-operative Hyponatremia',
    difficulty: 'intermediate',
    presentation:
      'A 68-year-old woman underwent total hip replacement 2 days ago. She now complains of nausea and headache. She appears confused and disoriented. Post-operative fluid management included D5W at 125 mL/hr.',
    labValues: [
      {
        id: 'na',
        name: 'Sodium',
        abbreviation: 'Na⁺',
        value: 118,
        unit: 'mEq/L',
        referenceRange: { min: 135, max: 145, criticalLow: 120, criticalHigh: 160 },
        category: 'Electrolytes',
      },
      {
        id: 'k',
        name: 'Potassium',
        abbreviation: 'K⁺',
        value: 3.8,
        unit: 'mEq/L',
        referenceRange: { min: 3.5, max: 5.0, criticalLow: 2.5, criticalHigh: 6.5 },
        category: 'Electrolytes',
      },
      {
        id: 'cl',
        name: 'Chloride',
        abbreviation: 'Cl⁻',
        value: 85,
        unit: 'mEq/L',
        referenceRange: { min: 96, max: 106 },
        category: 'Electrolytes',
      },
      {
        id: 'hco3',
        name: 'Bicarbonate',
        abbreviation: 'HCO₃⁻',
        value: 24,
        unit: 'mEq/L',
        referenceRange: { min: 22, max: 28 },
        category: 'Electrolytes',
      },
      {
        id: 'osm',
        name: 'Serum Osmolality',
        abbreviation: 'Osm',
        value: 245,
        unit: 'mOsm/kg',
        referenceRange: { min: 275, max: 295 },
        category: 'Electrolytes',
      },
      {
        id: 'urine-osm',
        name: 'Urine Osmolality',
        abbreviation: 'U-Osm',
        value: 520,
        unit: 'mOsm/kg',
        referenceRange: { min: 50, max: 1200 },
        category: 'Urine Studies',
      },
    ],
    questions: [
      {
        id: 'q1',
        question: 'What is the most likely diagnosis?',
        type: 'mcq',
        options: [
          'Hypovolemic hyponatremia from surgical blood loss',
          'SIADH (euvolemic hyponatremia)',
          'Hypervolemic hyponatremia from heart failure',
          'Psychogenic polydipsia',
        ],
        correctAnswer: 1,
        explanation:
          'The patient has euvolemic hyponatremia with inappropriately concentrated urine (urine osm > 100) despite low serum osmolality. This is classic for SIADH, which is common post-operatively due to pain, stress, and medications.',
      },
      {
        id: 'q2',
        question: 'What is the appropriate initial management?',
        type: 'mcq',
        options: [
          'Rapid correction with 3% hypertonic saline to prevent cerebral edema',
          'Normal saline infusion',
          'Fluid restriction to 800-1000 mL/day',
          'Immediate hemodialysis',
        ],
        correctAnswer: 2,
        explanation:
          'For euvolemic hyponatremia (SIADH) without severe neurologic symptoms, fluid restriction is first-line therapy. While the Na⁺ is critically low (118), the patient has mild symptoms. Correction should be gradual (6-8 mEq/L in 24 hours) to prevent osmotic demyelination.',
      },
    ],
    diagnosis: 'SIADH (Syndrome of Inappropriate Antidiuretic Hormone secretion)',
    reasoning:
      'This case demonstrates euvolemic hyponatremia in the post-operative setting. Key diagnostic features: (1) low serum sodium and osmolality, (2) inappropriately concentrated urine (Uosm > 100 when Sosm is low), (3) clinical euvolemia, (4) recent surgery. SIADH is common post-operatively due to pain, nausea, medications (opioids), and stress. The D5W infusion contributed by providing free water without adequate sodium.',
    learningPoints: [
      'SIADH is a diagnosis of exclusion requiring euvolemia assessment',
      'Urine osmolality > 100 mOsm/kg with low serum osmolality suggests SIADH',
      'Post-operative state is a common trigger for SIADH',
      'Avoid rapid overcorrection (max 6-8 mEq/L per 24 hours) to prevent osmotic demyelination syndrome',
      'Fluid restriction is first-line therapy for mild-moderate SIADH',
    ],
    mustNotMiss: true,
  },
  {
    id: 'dka-case',
    moduleId: 'acid-base',
    title: 'Diabetic Ketoacidosis',
    difficulty: 'intermediate',
    presentation:
      'A 24-year-old woman with type 1 diabetes presents with 2 days of nausea, vomiting, and abdominal pain. She admits to not taking insulin for the past 3 days. On exam: tachycardic, Kussmaul respirations, fruity breath odor.',
    labValues: [
      {
        id: 'ph',
        name: 'Arterial pH',
        abbreviation: 'pH',
        value: 7.12,
        unit: '',
        referenceRange: { min: 7.35, max: 7.45, criticalLow: 7.0, criticalHigh: 7.7 },
        category: 'Blood Gas',
      },
      {
        id: 'paco2',
        name: 'PaCO₂',
        abbreviation: 'PaCO₂',
        value: 22,
        unit: 'mmHg',
        referenceRange: { min: 35, max: 45 },
        category: 'Blood Gas',
      },
      {
        id: 'hco3',
        name: 'Bicarbonate',
        abbreviation: 'HCO₃⁻',
        value: 8,
        unit: 'mEq/L',
        referenceRange: { min: 22, max: 28 },
        category: 'Electrolytes',
      },
      {
        id: 'na',
        name: 'Sodium',
        abbreviation: 'Na⁺',
        value: 132,
        unit: 'mEq/L',
        referenceRange: { min: 135, max: 145 },
        category: 'Electrolytes',
      },
      {
        id: 'cl',
        name: 'Chloride',
        abbreviation: 'Cl⁻',
        value: 98,
        unit: 'mEq/L',
        referenceRange: { min: 96, max: 106 },
        category: 'Electrolytes',
      },
      {
        id: 'glucose',
        name: 'Glucose',
        abbreviation: 'Glu',
        value: 520,
        unit: 'mg/dL',
        referenceRange: { min: 70, max: 100, criticalHigh: 500 },
        category: 'Metabolic',
      },
      {
        id: 'k',
        name: 'Potassium',
        abbreviation: 'K⁺',
        value: 5.2,
        unit: 'mEq/L',
        referenceRange: { min: 3.5, max: 5.0 },
        category: 'Electrolytes',
      },
      {
        id: 'ketones',
        name: 'Serum Ketones',
        abbreviation: 'Ketones',
        value: 6.5,
        unit: 'mmol/L',
        referenceRange: { min: 0, max: 0.5 },
        category: 'Metabolic',
      },
    ],
    questions: [
      {
        id: 'q1',
        question: 'Calculate the anion gap.',
        type: 'interpretation',
        correctAnswer: '26',
        explanation:
          'Anion Gap = Na⁺ - (Cl⁻ + HCO₃⁻) = 132 - (98 + 8) = 26 mEq/L. This is a significantly elevated anion gap (normal 8-12), indicating the presence of unmeasured anions (ketoacids in this case).',
      },
      {
        id: 'q2',
        question: 'Is the respiratory compensation appropriate for the metabolic acidosis?',
        type: 'mcq',
        options: [
          'Yes, compensation is appropriate',
          'No, there is concurrent respiratory acidosis',
          'No, there is concurrent respiratory alkalosis',
          'Cannot determine from given data',
        ],
        correctAnswer: 0,
        explanation:
          'Use Winter\'s formula to check compensation: Expected PaCO₂ = 1.5 × [HCO₃⁻] + 8 (±2) = 1.5 × 8 + 8 = 20 mmHg (range 18-22). The measured PaCO₂ of 22 mmHg is within expected range, indicating appropriate respiratory compensation.',
      },
    ],
    diagnosis: 'Diabetic Ketoacidosis (DKA)',
    reasoning:
      'Classic DKA triad: hyperglycemia, high anion gap metabolic acidosis, and ketonemia. The patient has severe acidemia (pH 7.12) with markedly elevated anion gap (26) due to accumulation of ketoacids (beta-hydroxybutyrate and acetoacetate). Respiratory compensation is appropriate (Kussmaul respirations lowering PaCO₂). The slightly low sodium is expected due to hyperglycemia causing osmotic shift of water from ICF to ECF. Potassium appears normal but total body potassium is depleted—levels will drop with insulin therapy and must be monitored.',
    learningPoints: [
      'DKA presents with high anion gap metabolic acidosis, hyperglycemia, and ketones',
      'Winter\'s formula assesses appropriate respiratory compensation',
      'Serum potassium may appear normal/high initially due to acidosis and insulin deficiency',
      'Total body potassium is depleted; aggressive replacement needed during treatment',
      'Corrected sodium = measured Na⁺ + 1.6 × [(glucose - 100) / 100]',
      'MUST NOT MISS: DKA is a medical emergency requiring insulin, fluids, and electrolyte management',
    ],
    mustNotMiss: true,
  },
];
